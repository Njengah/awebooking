!function(){"use strict";var i,a,t,r,s,o=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}();i=jQuery,a=window.awebooking,t=document,r=window._awebookingRooms||{},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rooms=ko.observableArray(r.rooms||[]),this.scaffoldNumber=ko.observable(0)}return o(e,[{key:"add",value:function(){var e=this.getCurrentTitle(),t=this.rooms().length;this.rooms.push({id:-1,name:e+" "+(t+1)})}},{key:"remove",value:function(t,o){var n=this;if(t.id<0)this._removeItemEffect(t,o);else{a.confirm(a.i18n.warning,function(){a.ajax("DELETE","/ajax/delete-room/"+t.id,{_method:"DELETE",_wpnonce:r.deleteNonce},function(e){n._removeItemEffect(t,o),a.alert(e.message,"success")})})}}},{key:"_removeItemEffect",value:function(e,t){var o=this;i(t.currentTarget).closest("li").effect("highlight",{},150,function(){o.rooms.remove(e)})}},{key:"scaffold",value:function(){var e=this.getCurrentTitle(),t=parseInt(this.scaffoldNumber(),10)||1;this.rooms([]);for(var o=0;o<t;o++)this.rooms.push({id:-1,name:e+" "+(o+1)})}},{key:"getCurrentTitle",value:function(){var e=t.getElementById("title");return e?e.value.trim():"R"}}]),e}(),i(function(){var o=this;ko.applyBindings(new s,t.getElementById("js-rooms-list"));var e=i(".js-sorting-rooms");0<e.length&&new Sortable(e[0],{handle:".abrs-sortable__handle",animation:150});var n=i("#awebooking-room-type-data");i(".awebooking-tabs > li:first > a",n).trigger("click"),n.on("click",".awebooking-tabs a",function(e){e.preventDefault();var t=i(e.target);i(".awebooking-tabs > li.active",n).removeClass("active"),t.parent().addClass("active"),i(".awebooking-tabs-panels > div",n).hide(),i(t.attr("href"),o.$metabox).show()}),i('[id$="-all"] > ul.categorychecklist').each(function(){var e=i(this),t=e.find(":checked").first();if(t.length){var o=e.find("input").position().top,n=t.position().top;e.closest(".tabs-panel").scrollTop(n-o+5)}})})}();