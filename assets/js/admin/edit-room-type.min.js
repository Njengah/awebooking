!function(){"use strict";function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i,r,s,c,t;i=jQuery,r=window.awebooking,s=document,c=window._awebookingRooms||{},t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rooms=ko.observableArray(c.rooms||[]),this.scaffoldNumber=ko.observable(0)}var t,o,n;return t=e,(o=[{key:"add",value:function(){var e=this.getCurrentTitle(),t=this.rooms().length;this.rooms.push({id:-1,name:"".concat(e," ").concat(t+1)})}},{key:"remove",value:function(t,o){var n=this;if(t.id<0)this._removeItemEffect(t,o);else{r.confirm(r.i18n.warning,function(){r.ajax("DELETE","/ajax/delete-room/".concat(t.id),{_method:"DELETE",_wpnonce:c.deleteNonce},function(e){n._removeItemEffect(t,o),r.alert(e.message,"success")})})}}},{key:"_removeItemEffect",value:function(e,t){var o=this;i(t.currentTarget).closest("li").effect("highlight",{},150,function(){o.rooms.remove(e)})}},{key:"scaffold",value:function(){var e=this.getCurrentTitle(),t=parseInt(this.scaffoldNumber(),10)||1;this.rooms([]);for(var o=0;o<t;o++)this.rooms.push({id:-1,name:"".concat(e," ").concat(o+1)})}},{key:"getCurrentTitle",value:function(){var e=s.getElementById("title");return e?e.value.trim():"R"}}])&&a(t.prototype,o),n&&a(t,n),e}(),i(function(){var o=this;ko.applyBindings(new t,s.getElementById("js-rooms-list"));var e=i(".js-sorting-rooms");0<e.length&&new Sortable(e[0],{handle:".abrs-sortable__handle",animation:150});var n=i("#awebooking-room-type-data");i(".awebooking-tabs > li:first > a",n).trigger("click"),n.on("click",".awebooking-tabs a",function(e){e.preventDefault();var t=i(e.target);i(".awebooking-tabs > li.active",n).removeClass("active"),t.parent().addClass("active"),i(".awebooking-tabs-panels > div",n).hide(),i(t.attr("href"),o.$metabox).show()}),i('[id$="-all"] > ul.categorychecklist').each(function(){var e=i(this),t=e.find(":checked").first();if(t.length){var o=e.find("input").position().top,n=t.position().top;e.closest(".tabs-panel").scrollTop(n-o+5)}})})}();