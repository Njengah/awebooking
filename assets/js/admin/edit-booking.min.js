!function(){"use strict";function a(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r,s,d,l,c,e;r=jQuery,s=window.awebooking||{},d=window._awebookingEditBooking||{},l=d.i18n||{},c=function(e){e.fail(function(e){var n=e.responseJSON||r.parseJSON(e.responseText);n.message&&s.alert(n.message,n.status),s.debug&&console.log(e)})},e=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),r(".js-editnow").click(this.handleEditAddress),r("#js-add-note").click(this.handleAddNote),r(document).on("click",".js-delete-note",this.handleDeleteNote)}var n,t,o;return n=e,(t=[{key:"handleEditAddress",value:function(e){e.preventDefault();var n=r(this).data("focus"),t=r(this).closest(".js-booking-column");t.find("h3 > a.button-editnow").hide(),t.find("div.js-booking-data").hide(),t.find("div.js-edit-booking-data").show(),n&&r(n,t).length&&r(n,t).focus()}},{key:"handleAddNote",value:function(e){e.preventDefault();var n=r("#js-booking-notes"),t=r("#js-booking-note"),o=new String(t.val()).trim();if(0!==o.length){var a="";!0===r("#js-customer-note").prop("checked")&&(a="customer");var i=r.ajax({type:"POST",url:s.route("/ajax/booking-note"),data:{note:o,note_type:a,booking:parseInt(r("#post_ID").val(),10),_ajax_nonce:d.add_note_nonce}});i.done(function(e){t.val(""),r(e.data).prependTo(n),n.find(".awebooking-no-items").length&&n.find(".awebooking-no-items").closest("li").remove()}),c(i)}else s.alert(l.empty_note_warning,"warning")}},{key:"handleDeleteNote",value:function(e){e.preventDefault();var t=r(this).closest(".booking-note");t.length&&t.attr("rel")&&s.confirm(l.delete_note_warning,function(){var e=parseInt(t.attr("rel"),10),n=r.ajax({type:"POST",url:s.route("/ajax/booking-note/"+e),data:{_method:"DELETE",_ajax_nonce:d.delete_note_nonce}});n.done(function(){t.slideUp(100,function(){t.remove()})}),c(n)})}}])&&a(n.prototype,t),o&&a(n,o),e}(),r(function(){s.instances.editBooking=new e})}();