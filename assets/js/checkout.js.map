{"version":3,"file":"checkout.js","sources":["assets/babel/checkout.js"],"sourcesContent":["import $ from 'jquery';\n\nconst SELECTED = 'selected';\n\nconst Selector = {\n  ROOT:     '.payment-methods',\n  ITEM:     '.payment-method',\n  INPUT:    'input[type=\"radio\"]',\n  SELECTED: '.selected',\n}\n\nconst _handleLabelClick = function(e) {\n  const element = e.currentTarget\n  const input   = element.querySelector(Selector.INPUT)\n\n  // Prevent action on non-input.\n  if (!input) {\n    return;\n  }\n\n  let triggerChange = true\n  const rootElement = $(element).closest(Selector.ROOT)[0]\n\n  if (input.checked && $(element).hasClass(SELECTED)) {\n    triggerChange = false\n  } else {\n    $(rootElement).children(Selector.SELECTED).removeClass(SELECTED)\n  }\n\n  if (triggerChange) {\n    if (input.hasAttribute('disabled') || input.classList.contains('disabled')) {\n      e.preventDefault()\n      return\n    }\n\n    input.checked = !element.classList.contains(SELECTED)\n\n    input.focus()\n    $(input).trigger('change')\n\n    $(element).addClass(SELECTED)\n  }\n}\n\nconst _triggerPaymentMethod = function(e) {\n  const input = e.currentTarget\n  if (!input.checked) {\n    return\n  }\n\n  const root  = $(input).closest(Selector.ROOT)[0]\n  const event = $.Event('selected.awebooking.gateway', {\n    relatedTarget: input\n  })\n\n  $(root).trigger(event, input.value);\n}\n\n$(function () {\n  const $el = $('#payment-methods')\n    .on('click', Selector.ITEM, _handleLabelClick)\n    .on('change', Selector.INPUT, _triggerPaymentMethod);\n\n  setTimeout(() => {\n    $el.find(`${Selector.INPUT}:checked`)\n      .closest(Selector.ITEM)\n      .trigger('click')\n  }, 0)\n})\n"],"names":["SELECTED","Selector","ROOT","ITEM","INPUT","_handleLabelClick","e","element","currentTarget","input","querySelector","triggerChange","rootElement","$","closest","checked","hasClass","children","removeClass","hasAttribute","classList","contains","preventDefault","focus","trigger","addClass","_triggerPaymentMethod","root","event","Event","relatedTarget","value","$el","on","setTimeout","find"],"mappings":";;;;;EAEA,IAAMA,WAAW,UAAjB;;EAEA,IAAMC,WAAW;EACfC,QAAU,kBADK;EAEfC,QAAU,iBAFK;EAGfC,SAAU,qBAHK;EAIfJ,YAAU;EAJK,CAAjB;;EAOA,IAAMK,oBAAoB,SAApBA,iBAAoB,CAASC,CAAT,EAAY;EACpC,MAAMC,UAAUD,EAAEE,aAAlB;EACA,MAAMC,QAAUF,QAAQG,aAAR,CAAsBT,SAASG,KAA/B,CAAhB;;EAEA;EACA,MAAI,CAACK,KAAL,EAAY;EACV;EACD;;EAED,MAAIE,gBAAgB,IAApB;EACA,MAAMC,cAAcC,EAAEN,OAAF,EAAWO,OAAX,CAAmBb,SAASC,IAA5B,EAAkC,CAAlC,CAApB;;EAEA,MAAIO,MAAMM,OAAN,IAAiBF,EAAEN,OAAF,EAAWS,QAAX,CAAoBhB,QAApB,CAArB,EAAoD;EAClDW,oBAAgB,KAAhB;EACD,GAFD,MAEO;EACLE,MAAED,WAAF,EAAeK,QAAf,CAAwBhB,SAASD,QAAjC,EAA2CkB,WAA3C,CAAuDlB,QAAvD;EACD;;EAED,MAAIW,aAAJ,EAAmB;EACjB,QAAIF,MAAMU,YAAN,CAAmB,UAAnB,KAAkCV,MAAMW,SAAN,CAAgBC,QAAhB,CAAyB,UAAzB,CAAtC,EAA4E;EAC1Ef,QAAEgB,cAAF;EACA;EACD;;EAEDb,UAAMM,OAAN,GAAgB,CAACR,QAAQa,SAAR,CAAkBC,QAAlB,CAA2BrB,QAA3B,CAAjB;;EAEAS,UAAMc,KAAN;EACAV,MAAEJ,KAAF,EAASe,OAAT,CAAiB,QAAjB;;EAEAX,MAAEN,OAAF,EAAWkB,QAAX,CAAoBzB,QAApB;EACD;EACF,CA/BD;;EAiCA,IAAM0B,wBAAwB,SAAxBA,qBAAwB,CAASpB,CAAT,EAAY;EACxC,MAAMG,QAAQH,EAAEE,aAAhB;EACA,MAAI,CAACC,MAAMM,OAAX,EAAoB;EAClB;EACD;;EAED,MAAMY,OAAQd,EAAEJ,KAAF,EAASK,OAAT,CAAiBb,SAASC,IAA1B,EAAgC,CAAhC,CAAd;EACA,MAAM0B,QAAQf,EAAEgB,KAAF,CAAQ,6BAAR,EAAuC;EACnDC,mBAAerB;EADoC,GAAvC,CAAd;;EAIAI,IAAEc,IAAF,EAAQH,OAAR,CAAgBI,KAAhB,EAAuBnB,MAAMsB,KAA7B;EACD,CAZD;;EAcAlB,EAAE,YAAY;EACZ,MAAMmB,MAAMnB,EAAE,kBAAF,EACToB,EADS,CACN,OADM,EACGhC,SAASE,IADZ,EACkBE,iBADlB,EAET4B,EAFS,CAEN,QAFM,EAEIhC,SAASG,KAFb,EAEoBsB,qBAFpB,CAAZ;;EAIAQ,aAAW,YAAM;EACfF,QAAIG,IAAJ,CAAYlC,SAASG,KAArB,eACGU,OADH,CACWb,SAASE,IADpB,EAEGqB,OAFH,CAEW,OAFX;EAGD,GAJD,EAIG,CAJH;EAKD,CAVD;;;;"}