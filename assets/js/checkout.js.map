{"version":3,"file":"checkout.js","sources":["assets/babel/checkout.js"],"sourcesContent":["import $ from 'jquery';\n\nconst SELECTED = 'selected';\n\nconst Selector = {\n  ROOT:     '.payment-methods',\n  ITEM:     '.payment-method',\n  INPUT:    'input[type=\"radio\"]',\n  SELECTED: '.selected',\n}\n\nconst _handleLabelClick = function(e) {\n  const element = e.currentTarget\n  const input   = element.querySelector(Selector.INPUT)\n\n  // Prevent action on non-input.\n  if (!input) {\n    return;\n  }\n\n  let triggerChange = true\n  const rootElement = $(element).closest(Selector.ROOT)[0]\n\n  if (input.checked && $(element).hasClass(SELECTED)) {\n    triggerChange = false\n  } else {\n    $(rootElement).children(Selector.SELECTED).removeClass(SELECTED)\n  }\n\n  if (triggerChange) {\n    if (input.hasAttribute('disabled') || input.classList.contains('disabled')) {\n      e.preventDefault()\n      return\n    }\n\n    input.checked = !element.classList.contains(SELECTED)\n\n    input.focus({ preventScroll: true })\n    $(input).trigger('change')\n\n    $(element).addClass(SELECTED)\n  }\n}\n\nconst _triggerPaymentMethod = function(e) {\n  const input = e.currentTarget\n  if (!input.checked) {\n    return\n  }\n\n  const root  = $(input).closest(Selector.ROOT)[0]\n  const event = $.Event('selected.awebooking.gateway', {\n    relatedTarget: input\n  })\n\n  $(root).trigger(event, input.value);\n}\n\n$(function () {\n  const $el = $('#payment-methods')\n    .on('click', Selector.ITEM, _handleLabelClick)\n    .on('change', Selector.INPUT, _triggerPaymentMethod);\n\n  setTimeout(() => {\n    $el.find(`${Selector.INPUT}:checked`)\n      .closest(Selector.ITEM)\n      .trigger('click')\n  }, 0)\n})\n"],"names":["SELECTED","Selector","ROOT","ITEM","INPUT","_handleLabelClick","e","element","currentTarget","input","querySelector","triggerChange","rootElement","$","closest","checked","hasClass","children","removeClass","hasAttribute","classList","contains","preventDefault","focus","preventScroll","trigger","addClass","_triggerPaymentMethod","root","event","Event","relatedTarget","value","$el","on","setTimeout","find"],"mappings":";;;;;EAEA,IAAMA,QAAQ,GAAG,UAAjB;EAEA,IAAMC,QAAQ,GAAG;EACfC,EAAAA,IAAI,EAAM,kBADK;EAEfC,EAAAA,IAAI,EAAM,iBAFK;EAGfC,EAAAA,KAAK,EAAK,qBAHK;EAIfJ,EAAAA,QAAQ,EAAE;EAJK,CAAjB;;EAOA,IAAMK,iBAAiB,GAAG,SAApBA,iBAAoB,CAASC,CAAT,EAAY;EACpC,MAAMC,OAAO,GAAGD,CAAC,CAACE,aAAlB;EACA,MAAMC,KAAK,GAAKF,OAAO,CAACG,aAAR,CAAsBT,QAAQ,CAACG,KAA/B,CAAhB,CAFoC;;EAKpC,MAAI,CAACK,KAAL,EAAY;EACV;EACD;;EAED,MAAIE,aAAa,GAAG,IAApB;EACA,MAAMC,WAAW,GAAGC,CAAC,CAACN,OAAD,CAAD,CAAWO,OAAX,CAAmBb,QAAQ,CAACC,IAA5B,EAAkC,CAAlC,CAApB;;EAEA,MAAIO,KAAK,CAACM,OAAN,IAAiBF,CAAC,CAACN,OAAD,CAAD,CAAWS,QAAX,CAAoBhB,QAApB,CAArB,EAAoD;EAClDW,IAAAA,aAAa,GAAG,KAAhB;EACD,GAFD,MAEO;EACLE,IAAAA,CAAC,CAACD,WAAD,CAAD,CAAeK,QAAf,CAAwBhB,QAAQ,CAACD,QAAjC,EAA2CkB,WAA3C,CAAuDlB,QAAvD;EACD;;EAED,MAAIW,aAAJ,EAAmB;EACjB,QAAIF,KAAK,CAACU,YAAN,CAAmB,UAAnB,KAAkCV,KAAK,CAACW,SAAN,CAAgBC,QAAhB,CAAyB,UAAzB,CAAtC,EAA4E;EAC1Ef,MAAAA,CAAC,CAACgB,cAAF;EACA;EACD;;EAEDb,IAAAA,KAAK,CAACM,OAAN,GAAgB,CAACR,OAAO,CAACa,SAAR,CAAkBC,QAAlB,CAA2BrB,QAA3B,CAAjB;EAEAS,IAAAA,KAAK,CAACc,KAAN,CAAY;EAAEC,MAAAA,aAAa,EAAE;EAAjB,KAAZ;EACAX,IAAAA,CAAC,CAACJ,KAAD,CAAD,CAASgB,OAAT,CAAiB,QAAjB;EAEAZ,IAAAA,CAAC,CAACN,OAAD,CAAD,CAAWmB,QAAX,CAAoB1B,QAApB;EACD;EACF,CA/BD;;EAiCA,IAAM2B,qBAAqB,GAAG,SAAxBA,qBAAwB,CAASrB,CAAT,EAAY;EACxC,MAAMG,KAAK,GAAGH,CAAC,CAACE,aAAhB;;EACA,MAAI,CAACC,KAAK,CAACM,OAAX,EAAoB;EAClB;EACD;;EAED,MAAMa,IAAI,GAAIf,CAAC,CAACJ,KAAD,CAAD,CAASK,OAAT,CAAiBb,QAAQ,CAACC,IAA1B,EAAgC,CAAhC,CAAd;EACA,MAAM2B,KAAK,GAAGhB,CAAC,CAACiB,KAAF,CAAQ,6BAAR,EAAuC;EACnDC,IAAAA,aAAa,EAAEtB;EADoC,GAAvC,CAAd;EAIAI,EAAAA,CAAC,CAACe,IAAD,CAAD,CAAQH,OAAR,CAAgBI,KAAhB,EAAuBpB,KAAK,CAACuB,KAA7B;EACD,CAZD;;EAcAnB,CAAC,CAAC,YAAY;EACZ,MAAMoB,GAAG,GAAGpB,CAAC,CAAC,kBAAD,CAAD,CACTqB,EADS,CACN,OADM,EACGjC,QAAQ,CAACE,IADZ,EACkBE,iBADlB,EAET6B,EAFS,CAEN,QAFM,EAEIjC,QAAQ,CAACG,KAFb,EAEoBuB,qBAFpB,CAAZ;EAIAQ,EAAAA,UAAU,CAAC,YAAM;EACfF,IAAAA,GAAG,CAACG,IAAJ,WAAYnC,QAAQ,CAACG,KAArB,eACGU,OADH,CACWb,QAAQ,CAACE,IADpB,EAEGsB,OAFH,CAEW,OAFX;EAGD,GAJS,EAIP,CAJO,CAAV;EAKD,CAVA,CAAD;;;;"}