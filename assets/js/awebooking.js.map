{"version":3,"names":[],"mappings":"","sources":["awebooking.js"],"sourcesContent":["window.awebooking = {};\n\nconst accounting = require('accounting');\nconst Dropdown = require('./core/dropdown');\n\n(function ($, plugin) {\n  'use strict';\n\n  // Main objects\n  plugin.utils = plugin.instances = {};\n\n  plugin.utils.dropdown = function (el, config) {\n    $(el).each(function () {\n      $(this).data('abrs-dropdown', new Dropdown(this, config));\n    });\n  };\n\n  plugin.i18n = window._awebooking_i18n || {};\n\n  plugin.config = Object.assign( {}, window._awebooking, {\n    route: window.location.origin + '?awebooking_route=/',\n    ajax_url: window.location.origin + '/wp-admin/admin-ajax.php',\n  });\n\n  /**\n   * The admin route.\n   *\n   * @param  {string} route\n   * @return {string}\n   */\n  plugin.route = function (route) {\n    return this.config.route + (route || '').replace(/^\\//g, '');\n  };\n\n  /**\n   * Create new datepicker.\n   *\n   * @see https://flatpickr.js.org/options/\n   *\n   * @return {flatpickr}\n   */\n  plugin.datepicker = function (instance, options) {\n    const i18n = plugin.i18n;\n    const defaults = plugin.config.datepicker;\n    const disable = Array.isArray(defaults.disable) ? defaults.disable : [];\n\n    if (Array.isArray(defaults.disableDays)) {\n      disable.push(function (date) {\n        return defaults.disableDays.indexOf(date.getDay()) !== -1;\n      });\n    }\n\n    // const minDate = new Date().fp_incr(defaults.min_date);\n    // const maxDate = (defaults.max_date && defaults.max_date !== 0) ? new Date().fp_incr(defaults.max_date) : '';\n\n    const fp = flatpickr(instance, Object.assign({}, options, {\n      dateFormat: 'Y-m-d',\n      ariaDateFormat: i18n.dateFormat,\n      minDate: 'today',\n      // maxDate: max_date,\n      // disable: disable,\n      showMonths: defaults.showMonths || 1,\n      enableTime: false,\n      enableSeconds: false,\n      onReady(_, __, fp) {\n        fp.calendarContainer.classList.add('awebooking-datepicker');\n      }\n    }));\n\n    return fp;\n  };\n\n  /**\n   * Format the price.\n   *\n   * @param amount\n   * @returns {string}\n   */\n  plugin.formatPrice = function(amount) {\n    return accounting.formatMoney(amount, {\n      format: plugin.i18n.priceFormat,\n      symbol: plugin.i18n.currencySymbol,\n      decimal: plugin.i18n.decimalSeparator,\n      thousand: plugin.i18n.priceThousandSeparator,\n      precision: plugin.i18n.numberDecimals,\n    });\n  };\n\n  /**\n   * Document ready.\n   *\n   * @return {void}\n   */\n  $(function () {\n    window.tippy('[data-awebooking=\"tooltip\"]', {\n      theme: 'awebooking-tooltip'\n    });\n\n    $('[data-init=\"awebooking-dialog\"]').each( (e, el) => {\n      const dialog = new window.A11yDialog(el);\n\n      dialog.on('show', () => {\n        el.classList.add('open');\n        el.removeAttribute('aria-hidden');\n      });\n\n      dialog.on('hide', () => {\n        el.classList.remove('open');\n        el.setAttribute('aria-hidden', true);\n      });\n    });\n  });\n\n})(jQuery, window.awebooking);\n"],"file":"awebooking.js"}