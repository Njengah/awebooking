{"version":3,"names":[],"mappings":"","sources":["awebooking.js"],"sourcesContent":["window.awebooking = {};\r\n\r\nconst accounting = require('accounting');\r\n\r\n(function ($, plugin) {\r\n  'use strict';\r\n\r\n  // Main objects\r\n  plugin.utils = plugin.instances = {};\r\n\r\n  plugin.i18n = window._awebooking_i18n || {};\r\n\r\n  plugin.config = Object.assign( {}, window._awebooking, {\r\n    route: window.location.origin + '?awebooking_route=/',\r\n    ajax_url: window.location.origin + '/wp-admin/admin-ajax.php',\r\n  });\r\n\r\n  /**\r\n   * The admin route.\r\n   *\r\n   * @param  {string} route\r\n   * @return {string}\r\n   */\r\n  plugin.route = function (route) {\r\n    return this.config.route + (route || '').replace(/^\\//g, '');\r\n  };\r\n\r\n  /**\r\n   * Create new datepicker.\r\n   *\r\n   * @see https://flatpickr.js.org/options/\r\n   *\r\n   * @return {flatpickr}\r\n   */\r\n  plugin.datepicker = function (instance, options) {\r\n    const i18n = plugin.i18n;\r\n    const defaults = plugin.config.datepicker;\r\n    const disable = Array.isArray(defaults.disable) ? defaults.disable : [];\r\n\r\n    if (Array.isArray(defaults.disable_days)) {\r\n      disable.push(function (date) {\r\n        return defaults.disable_days.indexOf(date.getDay()) !== -1;\r\n      });\r\n    }\r\n\r\n    // const minDate = new Date().fp_incr(defaults.min_date);\r\n    // const maxDate = (defaults.max_date && defaults.max_date !== 0) ? new Date().fp_incr(defaults.max_date) : '';\r\n\r\n    const fp = flatpickr(instance, Object.assign({}, options, {\r\n      dateFormat: 'Y-m-d',\r\n      ariaDateFormat: i18n.date_format,\r\n      minDate: 'today',\r\n      // maxDate: max_date,\r\n      // disable: disable,\r\n      showMonths: defaults.show_months,\r\n      enableTime: false,\r\n      enableSeconds: false,\r\n      onReady(_, __, fp) {\r\n        fp.calendarContainer.classList.add('awebooking-datepicker');\r\n      }\r\n    }));\r\n\r\n    return fp;\r\n  };\r\n\r\n  /**\r\n   * Format the price.\r\n   *\r\n   * @param amount\r\n   * @returns {string}\r\n   */\r\n  plugin.formatPrice = function(amount) {\r\n    return accounting.formatMoney(amount, {\r\n      format: plugin.i18n.priceFormat,\r\n      symbol: plugin.i18n.currencySymbol,\r\n      decimal: plugin.i18n.decimalSeparator,\r\n      thousand: plugin.i18n.priceThousandSeparator,\r\n      precision: plugin.i18n.numberDecimals,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Document ready.\r\n   *\r\n   * @return {void}\r\n   */\r\n  $(function () {\r\n    window.tippy('[data-awebooking=\"tooltip\"]', {\r\n      theme: 'awebooking-tooltip'\r\n    });\r\n\r\n    $('[data-init=\"awebooking-dialog\"]').each( (e, el) => {\r\n      const dialog = new window.A11yDialog(el);\r\n\r\n      dialog.on('show', () => {\r\n        el.classList.add('open');\r\n        el.removeAttribute('aria-hidden');\r\n      });\r\n\r\n      dialog.on('hide', () => {\r\n        el.classList.remove('open');\r\n        el.setAttribute('aria-hidden', true);\r\n      });\r\n    });\r\n  });\r\n\r\n})(jQuery, window.awebooking);\r\n"],"file":"awebooking.js"}